<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
         const oneSecond = () => 1000
        const getCurrenTime = () => new Date()
        const clear = () => console.clear()
        const log = message => console.log(message)

        const serializeClocktime = date => ({
            hours: date.getHours(),
            minutes: date.getMinutes(),
            seconds: date.getSeconds()
        })
        //民用時間
        const civilianHours = clockTime => ({
            ...clockTime,
            hours: (clockTime.hours > 12) ? clockTime.hours - 12 : clockTime.hours//轉換成12位就好
        })
        const appendAMPM = clockTime => ({
            ...clockTime,
            ampm: (clockTime.hours >= 12) ? "am" : "pm"
        })
       
        const display = target => time => target(time)
        const formatClock = format => time =>
            format.replace("hh", time.hours)
                .replace("mm", time.minutes)
                .replace("ss", time.seconds)
                .replace("tt", time.ampmå)

        const prependZero = key => clockTime => ({
            ...clockTime,
            [key]: clockTime[key] < 10 ? "0" + clockTime[key] : clockTime[key]
        })

        const compose = (...fns) =>
            (arg) =>
                fns.reduce(
                    (composed, f) => f(composed),
                    arg
                )


        const converToCivilianTime = clockTime =>
            compose(appendAMPM,
                civilianHours)(clockTime);
        const doubleDigits = civilianTime =>
            compose(prependZero("hours"),
                prependZero("minutes"),
                prependZero("seconds"))(civilianTime)
        const startTicking = () =>
            setInterval(
                compose(
                    clear, getCurrenTime,
                    serializeClocktime,
                    converToCivilianTime,
                    doubleDigits,
                    formatClock("hh:mm:ss tt"),
                    display(log)
                ),
                oneSecond()
            )
        startTicking();
    </script>
</body>

</html>